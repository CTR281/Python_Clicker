<ClickerCell>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Ellipse:
            pos: self.pos
            size: self.size
            source: 'Graphics/Aventurer.png'


<Tresor>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos:self.pos
            size: 100,70
            source: 'Graphics/treasure.png'




<Enemy>:
    canvas:
        Color:
            rgba: self.color
        Ellipse:
            pos:self.pos
            size:self.size
        Color:
            rgba: 1, 0, 0, 1
        Rectangle:
            pos:root.pos[0]+root.size[0]+8, root.pos[1]
            size:5, root.size[1]
        Color:
            rgba: 0,1,0,1
        Rectangle:
            pos:root.pos[0]+root.size[0]+8, root.pos[1]
            size:5, root.pv
    Label:
        text: "%d/%d" % (root.enemy_weight,root.max)
        color: 0, 0, 0, 1
        center: root.pos[0]+root.size[0]+10, root.pos[1] + root.size[1] + 10

<AutoClicker>:
    Label:
        color: 1,1,1,1
        text:"Autofeed Tier"+str(root.tier)
        font_size: "20"
        pos:root.pos
        center:root.center



<ClickerGame>:
    cell : clicker_cell
    health : health
    tresor: tresor
    feed: feed_button
    auto_tier1: tier1
    auto_tier2: tier2


    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            size: root.size
            pos:root.pos
        Color:
            rgb: 1, 1, 1
        Rectangle:
            id: background
            size:root.size[0]* 3/4, root.size[1] * 7/8
            pos:0, root.size[1] * 1/8
            source: 'Graphics/Background.png'
        Rectangle:
            id: spikes
            size: root.width * 3/4, root.height * 1/8 # root.height*1/8
            pos: root.pos[0], root.pos[1] + root.height*1/8 + 10
            source: 'Graphics/spike.png'
        Color:
            rgba: 0,0,0,1
        Rectangle:
            id: vertical
            size: 10, root.height
            pos: root.width*root.limit_x, 0

        Rectangle:
            id: horizontal
            size: root.width*root.limit_x, 10
            pos: 0, root.height*root.limit_y

    Tresor:
        id: tresor
        pos:root.width*3/8-50,root.height*5/8+25+10+75


    ClickerCell:
        id: clicker_cell
        center: root.width * 3 / 8, root.height * 3 / 8 +25 +10
        jauge_pv: root.width*root.limit_x*4/5+20
        game: root

        canvas:

            Color:
                rgba: 0.3,0.1,0.1,1
            Rectangle:
                id: plateforme_verticale
                size: 10,self.top-self.size[1]-root.height*root.limit_y-30
                pos: root.width*root.limit_x*0.5-5, root.height*root.limit_y+10
            Color:
                rgba: 0.3,0.1,0.1,1
            Rectangle:
                id: plateforme_horizontale
                size: 100, 20
                pos: root.width*root.limit_x*0.5-5-45, self.top-self.size[1]-20
            Color:
                rgba: 1,0,0,1
            Rectangle:
                id:jauge
                pos:50, root.height-30
                size: root.width*root.limit_x*4/5+20, 20
            Color:
                rgba: 0,1,0,1
            Rectangle:
                id:jauge verte
                pos:50, root.height-30
                size:self.jauge_pv*(self.cell_weight/200), 20


        Label:
            text:"Gold:%d" % clicker_cell.gold
            font_size:"40"
            size: 200, 40
            text_size: self.size
            center_x:0+self.size[0]/2
            color: 1,0.9,0,1
            top: root.height - 40

    Button:
        id: feed_button
        name:"feed_button"
        background_color: 0,1,0,1
        text:"Feed!"
        font_size: 20
        size:root.width * 3 / 8, root.height * 1 / 8
        on_press: clicker_cell.grow()

    Button:
        id: upgrade_feedpower
        name: "upgrade_feedpower"
        text: "     +1 \n\n Cost:" + str(root.cell.feedpower_upgrade_cost)
        font_size: "15"
        on_press: root.cell.upgrade_feedpower()
        size:root.width * 3/8, root.height * 1/8
        pos: root.width * 3/8, 0

    Label:
        id:health
        text:"%d/%d" % (clicker_cell.cell_weight, 200)
        font_size:"20"
        center_y:root.height-30-10
        center_x:root.width*root.limit_x*4/5+40
        color: 0, 0, 0, 1

    Label:
        text:"%d" % int(root.timer)
        font_size:"40"
        top: root.height+30
        center_x:20
        color: 1,0,0,1

    Label:
        text:str(root.gameover)
        font_size:"70"
        color:0,0,0,1
        center: root.width * 3 / 8, root.height * 5 / 8


   # Label:
   #     text:"Feed Power:" +str(clicker_cell.feedpower)
   #     font_size:"30"
   #     color:0,1,0,1
   #     center_x:root.width * 7/8
   #     center_y:root.height * 1 / 8 + 25

   # Label:
   #     text:"Autoclick: +"+str(tier1.feed_per_second*tier1.amount+tier2.feed_per_second*tier2.amount)
   #     font_size:"30"
   #     color:0,1,0,1
   #     center_x:90
   #     center_y:root.height*1/4 + 25

    Label:
        id: upgrade
        text:"Upgrade"
        font_size:"40"
        color:1,0,0,1
        center: root.width*7/8, root.height-20

    Button:
        id: buy_tier1
        name: "buy_tier1"
        background_color: 1,0,1,1
        text:"+"+str(tier1.feed_per_second)+" : " + str(root.auto_tier1.buy_cost)
        font_size: 20
        on_press: root.buy_auto(root.auto_tier1)
        pos: root.width*6/8+10, root.height*1/2
        size: root.width*2/8-10,root.height*1/2-upgrade.font_size

    AutoClicker:
        id: tier1
        text:"Autofeed Tier " + str(root.auto_tier1.tier)
        buy_cost: 20
        feed_per_second:1
        center: buy_tier1.center_x, buy_tier1.center_y-2*buy_tier1.font_size

    Button:
        id: buy_tier2
        name:"buy_tier2"
        background_color: 1,1,0,1
        text:"+"+str(tier2.feed_per_second)+" : " + str(root.auto_tier2.buy_cost)
        font_size: 20
        on_press: root.buy_auto(root.auto_tier2)
        pos:root.width*6/8+10,0
        size:root.width*2/8-10,root.height*1/2

    AutoClicker:
        id: tier2
        text:"Autofeed Tier " + str(root.auto_tier2.tier)
        feed_per_second:5
        buy_cost: 200
        center:buy_tier2.center_x, buy_tier2.center_y-2*buy_tier2.font_size

   # Label:
   #     text:"Decay:-"+str(int(clicker_cell.fade_factor))
   #     font_size:"30"
   #     color:0.5,0,1,1
   #     center_x:55
   #     center_y:root.height*1/4 +55

